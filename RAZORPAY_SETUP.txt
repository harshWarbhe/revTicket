â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    RAZORPAY PAYMENT GATEWAY INTEGRATION
                         Complete Setup Instructions
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… INTEGRATION COMPLETED - READY TO USE

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ WHAT'S BEEN IMPLEMENTED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BACKEND (Spring Boot):
âœ“ RazorpayController - Handles order creation, payment verification, and failures
âœ“ RazorpayService - Business logic for Razorpay integration
âœ“ Payment Entity - Stores payment details with Razorpay fields
âœ“ Booking Entity - Updated with payment status tracking
âœ“ DTOs - RazorpayOrderRequest, RazorpayOrderResponse, RazorpayVerificationRequest
âœ“ MySQL Integration - Automatic storage of payment details

FRONTEND (Angular 18):
âœ“ PaymentComponent - Razorpay checkout integration with dynamic script loading
âœ“ PaymentSuccessComponent - Animated success screen with booking details
âœ“ PaymentFailureComponent - Animated failure screen with retry option
âœ“ RazorpayService - API calls for order creation and verification
âœ“ Routes - payment-success and payment-failure routes added

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ SETUP INSTRUCTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: GET RAZORPAY API KEYS
------------------------------
1. Go to https://dashboard.razorpay.com/signup
2. Create a free account (no credit card required for test mode)
3. Navigate to Settings â†’ API Keys
4. Generate Test Keys (Key ID and Key Secret)
5. Copy both keys

STEP 2: CONFIGURE BACKEND
--------------------------
1. Open: Backend/src/main/resources/application.properties
2. Replace the following lines:

   razorpay.key.id=rzp_test_YOUR_KEY_ID
   razorpay.key.secret=YOUR_KEY_SECRET

   With your actual keys:

   razorpay.key.id=rzp_test_xxxxxxxxxxxxxxxxxx
   razorpay.key.secret=xxxxxxxxxxxxxxxxxxxxxxxx

3. Save the file

STEP 3: VERIFY DEPENDENCIES
----------------------------
âœ“ Razorpay Java SDK already added to pom.xml (version 1.4.6)
âœ“ No additional dependencies needed

STEP 4: START THE APPLICATION
------------------------------
Backend:
  cd Backend
  mvn clean install
  mvn spring-boot:run

Frontend:
  cd Frontend
  npm install
  ng serve

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ PAYMENT FLOW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. USER SELECTS SEATS
   â†’ Navigate to seat booking page
   â†’ Select seats and proceed to payment

2. PAYMENT PAGE
   â†’ User enters contact details (name, email, phone)
   â†’ Clicks "Pay" button
   â†’ Frontend calls: POST /api/razorpay/create-order

3. RAZORPAY ORDER CREATION
   â†’ Backend creates Razorpay order
   â†’ Returns: orderId, amount, currency, key

4. RAZORPAY CHECKOUT POPUP
   â†’ Razorpay script loads dynamically
   â†’ Checkout popup opens with payment options
   â†’ User completes payment (UPI/Card/Wallet/NetBanking)

5. PAYMENT SUCCESS
   â†’ Razorpay returns: razorpay_payment_id, razorpay_order_id, razorpay_signature
   â†’ Frontend calls: POST /api/razorpay/verify-payment
   â†’ Backend verifies signature using HMAC SHA256
   â†’ Creates booking with status = CONFIRMED
   â†’ Creates payment record with all Razorpay details
   â†’ Returns: bookingId, ticketNumber

6. SUCCESS SCREEN
   â†’ Animated checkmark animation (2 seconds)
   â†’ Shows booking details
   â†’ Options: View Tickets or Back to Home

7. PAYMENT FAILURE (if any)
   â†’ Animated error screen
   â†’ Shows failure reasons
   â†’ Option to retry payment or go home

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¾ DATABASE SCHEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PAYMENTS TABLE:
- id (UUID)
- booking_id (FK to bookings)
- amount (DOUBLE)
- payment_method (ENUM: CARD, UPI, WALLET)
- status (ENUM: PENDING, SUCCESS, FAILED, REFUNDED)
- transaction_id (VARCHAR)
- razorpay_order_id (VARCHAR)
- razorpay_payment_id (VARCHAR)
- razorpay_signature (VARCHAR)
- payment_date (TIMESTAMP)

BOOKINGS TABLE (Updated):
- status (ENUM: PENDING, CONFIRMED, CANCELLED, CANCELLATION_REQUESTED)
- payment_method (VARCHAR)
- ticket_number (VARCHAR)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” SECURITY FEATURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Payment signature verification using HMAC SHA256
âœ“ Razorpay secret key stored securely in application.properties
âœ“ JWT authentication required for payment endpoints
âœ“ CORS configured for frontend origin
âœ“ Transaction IDs stored for audit trail
âœ“ Failed payment attempts logged in database

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª TESTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEST MODE PAYMENT:
1. Use Razorpay test keys (rzp_test_...)
2. In Razorpay checkout, use test cards:
   - Card: 4111 1111 1111 1111
   - CVV: Any 3 digits
   - Expiry: Any future date
   - OTP: 1234 (for 3D Secure)

3. Test UPI:
   - UPI ID: success@razorpay
   - This will simulate successful payment

4. Test Failure:
   - Card: 4000 0000 0000 0002
   - This will simulate failed payment

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¡ API ENDPOINTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CREATE ORDER
   POST /api/razorpay/create-order
   Body: {
     "amount": 500.0,
     "showtimeId": "showtime-uuid",
     "currency": "INR"
   }
   Response: {
     "orderId": "order_xxx",
     "currency": "INR",
     "amount": 50000,
     "key": "rzp_test_xxx"
   }

2. VERIFY PAYMENT
   POST /api/razorpay/verify-payment
   Headers: Authorization: Bearer <JWT_TOKEN>
   Body: {
     "razorpayOrderId": "order_xxx",
     "razorpayPaymentId": "pay_xxx",
     "razorpaySignature": "signature_xxx",
     "showtimeId": "showtime-uuid",
     "seats": ["seat1", "seat2"],
     "seatLabels": ["A1", "A2"],
     "totalAmount": 500.0,
     "customerName": "John Doe",
     "customerEmail": "john@example.com",
     "customerPhone": "9876543210"
   }
   Response: {
     "success": true,
     "message": "Payment verified successfully",
     "bookingId": "booking-uuid",
     "ticketNumber": "TKT-1234567890"
   }

3. PAYMENT FAILED
   POST /api/razorpay/payment-failed
   Headers: Authorization: Bearer <JWT_TOKEN>
   Body: {
     "razorpayOrderId": "order_xxx",
     "showtimeId": "showtime-uuid",
     "seats": ["seat1", "seat2"],
     "seatLabels": ["A1", "A2"],
     "totalAmount": 500.0,
     "customerName": "John Doe",
     "customerEmail": "john@example.com",
     "customerPhone": "9876543210"
   }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¨ FRONTEND FEATURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Dynamic Razorpay script loading
âœ“ Standalone components (Angular 18)
âœ“ Signals for reactive state management
âœ“ inject() for dependency injection
âœ“ Animated success screen (CSS animations)
âœ“ Animated failure screen (CSS animations)
âœ“ Responsive design
âœ“ Loading states
âœ“ Error handling
âœ“ Retry payment functionality

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ PRODUCTION DEPLOYMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Switch to Live Mode in Razorpay Dashboard
2. Generate Live API Keys
3. Update application.properties with live keys:
   razorpay.key.id=rzp_live_xxxxxxxxxxxxxxxxxx
   razorpay.key.secret=xxxxxxxxxxxxxxxxxxxxxxxx
4. Enable required payment methods in Razorpay Dashboard
5. Complete KYC verification for live transactions
6. Set up webhooks for payment notifications (optional)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ SUPPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Razorpay Documentation: https://razorpay.com/docs/
Razorpay Support: https://razorpay.com/support/
Test Cards: https://razorpay.com/docs/payments/payments/test-card-details/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ¨ INTEGRATION COMPLETE - READY TO ACCEPT PAYMENTS!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
