<div class="seat-booking-container" *ngIf="!loading; else loadingState">
  <div class="movie-info" *ngIf="movieInfo">
    <div class="movie-poster">
      <img [src]="movieInfo.posterUrl || 'assets/images/movies/default-poster.png'" [alt]="movieInfo.title">
    </div>
    <div class="movie-details">
      <h1>{{ movieInfo.title }}</h1>
      <div class="movie-meta">
        <span class="rating">⭐ {{ movieInfo.rating || 'N/A' }}/10</span>
        <span class="duration">{{ movieInfo.duration || 0 }} min</span>
        <span class="genre">{{ movieInfo.genre?.join(', ') }}</span>
      </div>
      <div class="show-info" *ngIf="showDateTime">
        <div class="info-item">
          <strong>{{ theaterName }}</strong>
          <span class="muted">{{ theaterLocation }}</span>
        </div>
        <div class="info-item">
          <strong>{{ showDateTime | date:'MMM d, y' }}</strong>
          <span>{{ showDateTime | date:'h:mm a' }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="seat-selection" *ngIf="showtime">
    <h2>Select Your Seats</h2>
    <app-seat-selector
      [showtimeId]="showtimeId"
      (seatsSelected)="onSeatsSelected($event)"
      (seatLabelsChanged)="onSeatLabelsChanged($event)"
      (totalAmountChanged)="onTotalAmountChanged($event)">
    </app-seat-selector>
  </div>

  <div class="booking-summary" *ngIf="selectedSeats.length > 0">
    <div class="summary-content">
      <div class="selected-info">
        <h3>Booking Summary</h3>
        <div class="summary-row">
          <span>Selected Seats</span>
          <span class="seats-list">{{ selectedSeatLabels.join(', ') }}</span>
        </div>
        <div class="summary-row">
          <span>Tickets</span>
          <span>{{ selectedSeatLabels.length }}</span>
        </div>
        <div class="summary-row total">
          <span>Total Amount</span>
          <span class="amount">₹{{ totalAmount }}</span>
        </div>
      </div>
      <button class="btn-proceed" (click)="proceedToPayment()">
        Proceed to Payment
        <span class="arrow">→</span>
      </button>
    </div>
  </div>

  <div class="empty-state" *ngIf="selectedSeats.length === 0">
    <p>Please select at least one seat to continue</p>
  </div>
</div>

<ng-template #loadingState>
  <app-loader [message]="'Loading seat layout...'"></app-loader>
</ng-template>