<div class="seat-booking">
  <!-- Loading State -->
  <div *ngIf="loading()" class="loading">
    <div class="spinner"></div>
    <p>Loading showtime...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error()" class="error">
    <h2>Unable to Load Showtime</h2>
    <p>{{ error() }}</p>
    <button (click)="goBack()" class="btn-secondary">Go Back</button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!loading() && !error() && showtime()" class="content">
    <!-- Header -->
    <header class="header">
      <button (click)="goBack()" class="back-btn">← Back</button>
      <div class="movie-info">
        <h1>{{ showtime()?.movie?.title }}</h1>
        <div class="details">
          <span>{{ getTheaterLabel() }}</span>
          <span>{{ getScreenLabel() }}</span>
          <span>{{ getShowLabel() }}</span>
          <span>{{ showtime()?.showDateTime | date:'EEE, MMM d, y' }}</span>
          <span>{{ showtime()?.showDateTime | date:'h:mm a' }}</span>
        </div>
      </div>
    </header>

    <!-- Seat Selection -->
    <main class="seat-selection">
      <!-- Screen -->
      <div class="screen">
        <div class="screen-curve"></div>
        <span class="screen-label">{{ getScreenLabel().toUpperCase() }}</span>
      </div>

      <!-- Seats Grid -->
      <div class="seats-grid">
        <div *ngFor="let row of seatRows()" class="seat-row">
          <span class="row-label">{{ row.row }}</span>
          <div class="seats">
            <button
              *ngFor="let seat of row.seats"
              (click)="toggleSeat(seat)"
              [class]="getSeatClass(seat)"
              [disabled]="seat.isBooked || seat.isHeld"
              class="seat">
              {{ seat.number }}
            </button>
          </div>
          <span class="row-label">{{ row.row }}</span>
        </div>
      </div>

      <!-- Legend -->
      <div class="legend">
        <div class="legend-item">
          <div class="seat available"></div>
          <span>Available</span>
        </div>
        <div class="legend-item">
          <div class="seat selected"></div>
          <span>Selected</span>
        </div>
        <div class="legend-item">
          <div class="seat booked"></div>
          <span>Booked</span>
        </div>
      </div>
    </main>
  </div>

  <!-- Booking Summary -->
  <div *ngIf="selectedSeatsList().length > 0" class="booking-summary">
    <div class="summary-content">
      <div class="selected-info">
        <div class="seats-selected">{{ selectedSeatsLabels().join(', ') }}</div>
        <div class="seat-count">{{ selectedSeatsLabels().length }} seat(s) selected</div>
      </div>
      <div class="price-info">
        <div class="total">₹{{ totalPrice() }}</div>
        <button (click)="proceedToPayment()" class="btn-primary">
          Proceed to Payment
        </button>
      </div>
    </div>
  </div>
</div>