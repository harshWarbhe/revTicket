<div class="add-movie-container">
  <div class="admin-page-header">
    <div class="admin-header-background"></div>
    <div class="admin-header-content">
      <div class="admin-header-text">
        <h1>{{ getPageTitle() }}</h1>
        <p>{{ isEditMode() ? 'Update movie information' : 'Create a new movie listing for your theater' }}</p>
      </div>
    </div>
  </div>

  <div class="loading-state" *ngIf="loading()">
    <div class="spinner"></div>
    <p>Loading movie details...</p>
  </div>

  <div class="add-movie-card" *ngIf="!loading()">
    <form [formGroup]="movieForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group">
          <label for="title">Movie Title *</label>
          <input 
            type="text" 
            id="title" 
            formControlName="title"
            placeholder="Enter movie title"
            [class.error]="movieForm.get('title')?.invalid && movieForm.get('title')?.touched">
          <div class="error-message" *ngIf="movieForm.get('title')?.invalid && movieForm.get('title')?.touched">
            {{ getFieldError('title') || 'Movie title is required' }}
          </div>
        </div>

        <div class="form-group">
          <label for="genre">Genre * (comma-separated)</label>
          <input 
            type="text" 
            id="genre" 
            formControlName="genre"
            placeholder="e.g., Action, Adventure, Drama"
            [class.error]="movieForm.get('genre')?.invalid && movieForm.get('genre')?.touched">
          <small class="hint">Enter genres separated by commas</small>
          <div class="error-message" *ngIf="movieForm.get('genre')?.invalid && movieForm.get('genre')?.touched">
            {{ getFieldError('genre') || 'Please enter at least one genre' }}
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="duration">Duration (minutes) *</label>
          <input 
            type="number" 
            id="duration" 
            formControlName="duration"
            placeholder="120"
            min="1"
            [class.error]="movieForm.get('duration')?.invalid && movieForm.get('duration')?.touched">
          <div class="error-message" *ngIf="movieForm.get('duration')?.invalid && movieForm.get('duration')?.touched">
            {{ getFieldError('duration') || 'Duration must be at least 1 minute' }}
          </div>
        </div>

        <div class="form-group">
          <label for="rating">Rating (0-10) *</label>
          <input 
            type="number" 
            id="rating" 
            formControlName="rating"
            placeholder="8.5"
            min="0"
            max="10"
            step="0.1"
            [class.error]="movieForm.get('rating')?.invalid && movieForm.get('rating')?.touched">
          <div class="error-message" *ngIf="movieForm.get('rating')?.invalid && movieForm.get('rating')?.touched">
            {{ getFieldError('rating') || 'Rating must be between 0 and 10' }}
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="releaseDate">Release Date *</label>
          <input 
            type="date" 
            id="releaseDate" 
            formControlName="releaseDate"
            [class.error]="movieForm.get('releaseDate')?.invalid && movieForm.get('releaseDate')?.touched">
          <div class="error-message" *ngIf="movieForm.get('releaseDate')?.invalid && movieForm.get('releaseDate')?.touched">
            {{ getFieldError('releaseDate') || 'Release date is required' }}
          </div>
        </div>

        <div class="form-group">
          <label for="language">Language *</label>
          <input 
            type="text" 
            id="language" 
            formControlName="language"
            placeholder="English"
            [class.error]="movieForm.get('language')?.invalid && movieForm.get('language')?.touched">
          <div class="error-message" *ngIf="movieForm.get('language')?.invalid && movieForm.get('language')?.touched">
            {{ getFieldError('language') || 'Language is required' }}
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="description">Description *</label>
        <textarea 
          id="description" 
          formControlName="description"
          placeholder="Enter movie description..."
          rows="4"
          [class.error]="movieForm.get('description')?.invalid && movieForm.get('description')?.touched"></textarea>
        <div class="error-message" *ngIf="movieForm.get('description')?.invalid && movieForm.get('description')?.touched">
          {{ getFieldError('description') || 'Description is required' }}
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="posterUrl">Poster URL</label>
          <input 
            type="url" 
            id="posterUrl" 
            formControlName="posterUrl"
            placeholder="https://example.com/poster.jpg">
        </div>
        <div class="form-group">
          <label for="trailerUrl">Trailer URL</label>
          <input 
            type="url" 
            id="trailerUrl" 
            formControlName="trailerUrl"
            placeholder="https://youtube.com/watch?v=...">
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-secondary" (click)="onCancel()" [disabled]="submitting()">
          Cancel
        </button>
        <button 
          type="submit" 
          class="btn-primary" 
          [disabled]="movieForm.invalid || submitting()">
          {{ submitting() ? (isEditMode() ? 'Updating...' : 'Adding...') : getSubmitButtonText() }}
        </button>
      </div>
    </form>
  </div>
</div>
