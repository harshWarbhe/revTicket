<div class="page-wrapper">
  <!-- HEADER -->
  <header class="page-header">
    <div>
      <h1 class="page-title">Manage Bookings</h1>
      <p class="page-subtitle">View and manage all movie bookings</p>
    </div>
  </header>

  <!-- FILTERS -->
  <section class="filters-bar">
    <div class="search-box">
      <input type="text" 
             class="search-input" 
             placeholder="Search by booking ID, movie, or user..." 
             [value]="searchTerm()"
             (input)="searchBookings($any($event.target).value)">
      <span class="search-icon">ğŸ”</span>
    </div>

    <select class="filter-dropdown" 
            [value]="filterStatus()"
            (change)="filterByStatus($any($event.target).value)">
      <option value="ALL">All Status</option>
      <option value="CONFIRMED">Confirmed</option>
      <option value="CANCELLED">Cancelled</option>
      <option value="PENDING">Pending</option>
    </select>
  </section>

  <!-- LOADING -->
  @if (loading()) {
  <section class="loading-state">
    <div class="spinner"></div>
    <p>Loading bookings...</p>
  </section>
  }

  <!-- BOOKINGS GRID -->
  @if (!loading() && filteredBookings().length > 0) {
  <section class="bookings-grid">
    @for (booking of filteredBookings(); track booking.id) {
    <div class="booking-card">
      <div class="card-header">
        <span class="booking-id">{{ booking.bookingId || booking.id }}</span>
        <span class="status-pill" 
              [class.confirmed]="booking.status === 'CONFIRMED'"
              [class.cancelled]="booking.status === 'CANCELLED'"
              [class.pending]="booking.status === 'PENDING'">
          {{ booking.status }}
        </span>
      </div>

      <div class="card-details">
        <div class="detail-row">
          <span class="detail-label">ğŸ¬ Movie</span>
          <span class="detail-value">{{ booking.movieTitle }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ‘¤ User</span>
          <span class="detail-value">{{ booking.userName || 'N/A' }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ¢ Theatre</span>
          <span class="detail-value">{{ booking.theaterName || 'N/A' }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ’º Seats</span>
          <span class="detail-value">{{ booking.seats?.join(', ') || 'N/A' }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ’° Amount</span>
          <span class="detail-value amount">{{ formatCurrency(booking.totalAmount || 0) }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">ğŸ“… Date</span>
          <span class="detail-value">{{ booking.bookingDate | date: 'medium' }}</span>
        </div>
      </div>

      @if (booking.status === 'CONFIRMED') {
      <div class="card-actions">
        <button class="action-btn cancel" (click)="cancelBooking(booking.id)">
          Cancel Booking
        </button>
      </div>
      }
    </div>
    }
  </section>
  }

  <!-- EMPTY STATE -->
  @if (!loading() && filteredBookings().length === 0) {
  <section class="empty-state">
    <div class="empty-icon">ğŸ«</div>
    <h3>No Bookings Found</h3>
    <p>{{ searchTerm() || filterStatus() !== 'ALL' ? 'Try adjusting your filters' : 'No bookings have been made yet' }}</p>
  </section>
  }
</div>
